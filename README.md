# 信号基站设计项目

## 项目简介

这是一个基于图像处理的信号基站设计项目，能够将卫星图像或航拍图像转换为栅格数据，并进行信号覆盖模拟分析。

## 主要功能

1. **图像转栅格转换**：将上传的图像转换为68x95的栅格数据
2. **地形分类识别**：识别5种地形类型（空地、建筑物、树木、道路、水体）
3. **信号覆盖模拟**：基于栅格数据进行信号传播模拟
4. **结果可视化**：生成信号强度图、覆盖图等可视化结果

## 算法改进说明

### 改进前的问题
- 水体识别过多（31.5%），不符合实际情况
- 道路识别过于激进（61.2%）
- 分类逻辑过于简单，主要依赖亮度阈值
- 缺乏空间一致性考虑
- 颜色信息利用不足

### 改进后的算法特点

#### 1. 多特征融合分类
- **颜色特征**：RGB + HSV颜色空间分析
- **纹理特征**：梯度、LBP（局部二值模式）、GLCM（灰度共生矩阵）
- **边缘特征**：Canny、Sobel、Laplacian边缘检测
- **形状特征**：矩形度、圆形度、形状复杂度、面积占比

#### 2. 智能分类逻辑
```python
# 空地：高亮度，低饱和度，均匀颜色，少边缘
# 建筑物：中等亮度，高矩形度，中等纹理，偏灰色
# 树木：绿色，高纹理，高复杂度，高饱和度
# 道路：严格灰色，低纹理，高矩形度，中等边缘
# 水体：蓝色，低纹理，少边缘，高饱和度
```

#### 3. 空间一致性处理
- **空间一致性滤波**：基于邻居投票机制
- **形态学后处理**：开运算去除噪点，闭运算填充小洞
- **上下文分析**：考虑相邻像素的类型信息

#### 4. 改进效果对比

| 地形类型 | 改进前 | 改进后 | 改进效果 |
|---------|--------|--------|----------|
| 水体 | 31.5% | 0.3% | ✓ 大幅降低 |
| 道路 | 61.2% | 22.5% | ✓ 显著改善 |
| 建筑物 | 20.6% | 40.2% | ✓ 合理提升 |
| 树木 | 3.4% | 17.0% | ✓ 大幅提升 |
| 空地 | 11.9% | 20.1% | ✓ 合理提升 |

#### 5. 算法性能指标
- **空间一致性评分**：0.80（高一致性）
- **分类多样性评分**：0.83（良好多样性）
- **处理时间**：约3.6秒（68x95栅格）

## 技术架构

### 后端技术栈
- **Flask**：Web框架
- **OpenCV**：图像处理
- **NumPy**：数值计算
- **SciPy**：科学计算
- **scikit-learn**：机器学习工具

### 前端技术栈
- **HTML/CSS/JavaScript**：用户界面
- **jQuery**：DOM操作
- **Canvas**：图像显示

### MATLAB集成
- **信号传播模型**：COST231-Walfisch-Ikegami模型
- **覆盖模拟**：Monte Carlo仿真
- **结果可视化**：信号强度图、覆盖图

## 安装和使用

### 环境要求
- Python 3.7+
- MATLAB R2018b+
- OpenCV
- NumPy
- SciPy
- scikit-learn

### 安装步骤
```bash
# 1. 克隆项目
git clone [项目地址]

# 2. 安装Python依赖
pip install -r requirements.txt

# 3. 运行应用
python app.py
```

### 使用流程
1. 访问 http://localhost:5000
2. 上传卫星图像或航拍图像
3. 选择信号传播模型和参数
4. 点击"开始模拟"
5. 查看生成的栅格数据和模拟结果

## 文件结构

```
大创项目-信号基站设计/
├── app.py                    # Flask主应用
├── image_to_grid_python.py   # 图像转栅格算法（改进版）
├── simulation_core.py        # 信号模拟核心
├── test_ml_algorithm.py      # 算法测试脚本
├── requirements.txt          # Python依赖
├── static/                   # 静态文件
│   ├── uploads/             # 上传文件目录
│   ├── results/             # 结果文件目录
│   ├── css/                 # 样式文件
│   └── js/                  # JavaScript文件
├── templates/               # HTML模板
└── 雏雁-已有成果/           # 原始MATLAB代码
```

## 算法核心函数

### 主要分类函数
- `improved_classification()`: 改进的分类算法
- `extract_color_features()`: 颜色特征提取
- `calculate_texture_features()`: 纹理特征计算
- `detect_edges_improved()`: 改进的边缘检测
- `analyze_shape_features_improved()`: 形状特征分析

### 后处理函数
- `spatial_consistency_filter()`: 空间一致性滤波
- `morphological_post_processing()`: 形态学后处理

### 主转换函数
- `enhanced_image_to_grid_python()`: 改进的图像转栅格主函数

## 测试和验证

运行测试脚本：
```bash
python test_ml_algorithm.py
```

测试内容包括：
- 算法性能测试
- 分类准确性验证
- 空间一致性评估
- 处理时间测量

## 未来改进方向

1. **深度学习集成**：引入CNN进行更精确的分类
2. **多尺度分析**：支持不同分辨率的图像处理
3. **实时处理**：优化算法性能，支持实时处理
4. **用户界面优化**：改进Web界面，增加交互功能
5. **结果导出**：支持多种格式的结果导出

## 贡献指南

欢迎提交Issue和Pull Request来改进项目。

## 许可证

本项目采用MIT许可证。
